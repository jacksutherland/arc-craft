{"version":3,"file":"FeedWidget.js","mappings":"YAAA,IAAUA,EAAAA,EAkDPC,OA/CCC,MAAMC,WAAaC,QAAQC,KAAKC,OAAO,CACnCC,QAAS,KAETC,KAAM,SAASC,EAAUC,EAAKC,GAAO,WACjCC,KAAKL,QAAUP,EAAE,UAAYS,GAC7BG,KAAKL,QAAQM,SAAS,WAGtBC,MAAMC,IAAI,mCAAoC,CAC1CC,OAAQ,CACJN,IAAKA,KAEVO,MAAK,SAAAC,GACJ,EAAKX,QAAQY,YAAY,WACzB,EAAKZ,QAAQa,KAAK,SACfC,KAAK,MAAOH,EAASI,KAAKC,WAC7B,IAAIC,EAAO,EAAKjB,QAAQa,KAAK,MAE7BF,EAASI,KAAKG,OAASP,EAASI,KAAKG,OAAS,IAAIC,QAAO,SAAAC,GAAI,OAAIA,EAAKC,UAAUC,MAAM,mBACtFX,EAASI,KAAKG,MAAMK,SAAQ,SAACH,EAAMI,GAC/B,IAAMC,EAAMhC,EAAEwB,EAAKO,IACfE,EAAajC,EAAE,OAAQ,CACvBkC,KAAMP,EAAKC,UACXO,OAAQ,SACRC,KAAMT,EAAKU,QACZtB,IAAI,GAAGuB,UAAY,IAElBX,EAAKY,OACLN,GAAc,8BAAgC/B,MAAMsC,WAAWb,EAAKY,MAAQ,WAGhFP,EAAIS,KAAKR,MAIb/B,MAAMwC,kBAAkB,OAAQ,4BAA6B,CACzDpB,KAAM,CACFZ,IAAKA,EACLY,KAAMJ,EAASI,WA9B3B,OAiCS,WACL,EAAKf,QAAQY,YAAY,WACzBjB,MAAMyC,GAAGC,aAAa1C,MAAM2C,EAAE,MAAO,kC","sources":["webpack:///./FeedWidget.js"],"sourcesContent":["(function($) {\n    /** global: Craft */\n    /** global: Garnish */\n    Craft.FeedWidget = Garnish.Base.extend({\n        $widget: null,\n\n        init: function(widgetId, url, limit) {\n            this.$widget = $('#widget' + widgetId);\n            this.$widget.addClass('loading');\n\n            // Get the feed data\n            axios.get('https://feed-proxy.craftcms.com/', {\n                params: {\n                    url: url,\n                },\n            }).then(response => {\n                this.$widget.removeClass('loading');\n                this.$widget.find('table')\n                  .attr('dir', response.data.direction);\n                let $tds = this.$widget.find('td');\n                // Filter out any invalid links\n                response.data.items = (response.data.items || []).filter(item => item.permalink.match(/^https?:\\/\\//));\n                response.data.items.forEach((item, i) => {\n                    const $td = $($tds[i]);\n                    let widgetHtml = $('<a/>', {\n                        href: item.permalink,\n                        target: '_blank',\n                        text: item.title\n                    }).get(0).outerHTML + ' ';\n\n                    if (item.date) {\n                        widgetHtml += '<span class=\"light nowrap\">' + Craft.formatDate(item.date) + '</span>';\n                    }\n\n                    $td.html(widgetHtml);\n                });\n\n                // Now cache the data\n                Craft.sendActionRequest('POST', 'dashboard/cache-feed-data', {\n                    data: {\n                        url: url,\n                        data: response.data,\n                    },\n                });\n            }).catch(() => {\n                this.$widget.removeClass('loading');\n                Craft.cp.displayError(Craft.t('app', 'Could not load the feed'));\n            });\n        }\n    });\n})(jQuery);\n"],"names":["$","jQuery","Craft","FeedWidget","Garnish","Base","extend","$widget","init","widgetId","url","limit","this","addClass","axios","get","params","then","response","removeClass","find","attr","data","direction","$tds","items","filter","item","permalink","match","forEach","i","$td","widgetHtml","href","target","text","title","outerHTML","date","formatDate","html","sendActionRequest","cp","displayError","t"],"sourceRoot":""}